该项目为秒杀项目，围绕着秒杀这一个==高并发==的场景做各种措施

使用：

网址：http://139.224.134.99:9080/startseckill ==（如果不访问该网址秒杀是不会开启的！）==

访问完上面自动跳转到登陆页面

登陆页面：http://139.224.134.99:9080/local/login 

```shell
账号：10000000001
密码：123456
登陆后就可以直接进入秒杀的环节了，倒计时60s
如果点太快可能查询不到订单....
```

本项目使用技术栈：

==springboot2.0+mybatis+redis+rabbitmq+mysql==

基本功能实现：

```shell
使用JSR303校验功能
rabbitmq消息队列异步处理请求
基于springboot的前后端分离开发
前端页面利用bootstrap,jquery模板
最主要的核心就是秒杀的场景的处理，可支持高并发的访问
```

在登陆功能上：

```shell
以redis为核心构建分布式session，处理服务器的集群session问题
```

在限流方面上：

```shell
为避免高并发量对数据库造成的冲击，以对数据库的读写操作大量放到缓存redis中，之前是以一台redis做的，后面将redis进行分片，做成两台redis部署

引入了消息队列中间件rabbitmq，将原本的同步代码改造成异步处理秒杀的订单请求，可以减少对数据库的访问
```

本地压测：

```shell
一台tomcat(本地)，两台redis(远程服务器)，一个rabbitmq(远程服务器)，一台mysql(本地)，100个用户3s内3000请求，并没有多大问题，没出现mysql超卖的情况，请求数量如果再次增大，redis就会顶不住(拿不到连接，可能问题在于服务器性能！)
```

服务器压测：

```shell
因为服务器的性能(2g1核)问题，redis，rabbitmq，tomcat，mysql,nginx全部部署到同一台服务器上，压测功能基本无法实现(基本宕机！)
(其实已经部署好nginx，另一台tomcat也已经准备好了，但是服务器这样稍微测测就挂掉！)
```

标准服务器压测：
```shell
优化前请求数5000 * 10 QPS 754
优化后请求数5000 * 10 QPS 1569
```

---------------------------------------------------------------

更新优化：

添加了秒杀令牌的机制，并不是直接访问秒杀接口，而是先获取令牌才能去调用秒杀接口

添加令牌发放策略，避免大量的请求产生大量的令牌导致Redis内存不足

在上面的基础上还要在调用生成订单和扣减库存服务之前，利用本地队列（线程池）去削峰

因为之前考虑不够周到，容易出现大量请求将redis扣减为负数但是没有添加回去的问题，后面已经修复bug，仍有可能在极端的情况下出现少卖的情况



